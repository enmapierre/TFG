---
import ProductCard from './ProductCard.astro';

const products = await fetch ("http://localhost:8080/productos")//ir cambiando
.then(res=>{return res.json()})
---

<section class="px-4 py-12">
  <div class="mx-auto container">
    <h2 class="mb-8 font-serif text-2xl md:text-3xl">Bestseller</h2>

    <div class="relative">
      <!-- Carrusel de productos -->
      <div class="flex gap-4 -mx-4 px-4 pb-4 overflow-x-auto scroll-smooth carousel">
        {products
          .sort(() => Math.random() - 0.5)
          .slice(0, 8)
          .map(product => (
          <div class="flex-shrink-0 w-[250px] md:w-[280px]">
            <ProductCard 
              id={product.id}
              image={product.image}
              title={product.title}
              description={product.description}
              price={product.price}
            />
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<!-- Script del carrito cargado una sola vez -->
<script src="/src/scripts/cart.js"></script>


<!--8 fijos
<section class="px-4 py-12">
  <div class="mx-auto container">
    <h2 class="mb-8 font-serif text-2xl md:text-3xl">Bestseller</h2>

    <div class="relative">
      <div class="flex gap-4 -mx-4 px-4 pb-4 overflow-x-auto scroll-smooth carousel">
        {products.slice(0, 8).map(product => (
          <div class="flex-shrink-0 min-w-[250px] md:min-w-[280px]">
            <ProductCard 
              id={product.id}
              image={product.image}
              title={product.title}
              description={product.description}
              price={product.price}
            />
          </div>
        ))}
      </div>
    </div>
  </div>
</section> -->